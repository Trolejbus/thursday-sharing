"use strict";(self.webpackChunkthursday_sharing=self.webpackChunkthursday_sharing||[]).push([[987],{1987:(R,m,s)=>{s.r(m),s.d(m,{NiceDatePipeModule:()=>E});var d=s(6895),c=s(8583),e=s(8256),T=s(1135),D=s(5121),p=s(1566),g=s(5963);function A(n=0,r=p.z){return n<0&&(n=0),(0,g.H)(n,n,r)}var Z=s(8675),l=s(4004),U=s(9300),v=s(4671),y=s(4482),O=s(5403);function w(n,r){return n===r}let M=(()=>{class n{constructor(t){this.changeDetectorRef=t,this.subscription=null,this.latestValue=null,this.dateSubject$=new T.X(null),this.ONE_DAY=864e5,this.ONE_HOUR=36e5,this.ONE_MINUTE=6e4,this.date$=(0,D.a)([this.dateSubject$,A(1e4).pipe((0,Z.O)(0))]).pipe((0,l.U)(([i,a])=>i),(0,U.h)(i=>null!=i),(0,l.U)(i=>this.toNicelyFormattedTime(i)),(0,l.U)(i=>this.translate(i)),function N(n,r=v.y){return n=n??w,(0,y.e)((t,i)=>{let a,o=!0;t.subscribe((0,O.x)(i,u=>{const h=r(u);(o||!n(a,h))&&(o=!1,a=h,i.next(u))}))})}()),this.subscription=this.date$.subscribe(i=>{this._updateLatestValue(i)})}ngOnDestroy(){null!=this.subscription&&this._dispose()}transform(t){return this.dateSubject$.next(t),this.latestValue}_dispose(){this.subscription?.unsubscribe(),this.latestValue=null}translate(t){if(null==t.key)return t.date??"";const a=null!=t.month?new Map([["JANUARY","january"],["FEBRUARY","february"],["MARCH","march"],["APRIL","april"],["MAY","may"],["JUNI","juni"],["JULI","juli"],["AUGUST","august"],["SEPTEMBER","september"],["OKTOBER","oktober"],["NOVEMBER","november"],["DECEMBER","december"]]).get(t.month):null,u=new Map([["MINUTES_ONLY_AGO",`${t.minutes} minutes ago`],["HOURS_AND_MINUTES_AGO",`${t.hours} hours ${t.minutes} minutes ago`],["IN_MINUTES",`in ${t.minutes} minutes`],["IN_HOURS_AND_MINUTES",`in ${t.hours} hours ${t.minutes} minutes`],["YESTERDAY_DATE",`yesterday ${t.date}`],["TOMORROW_DATE",`tomorrow ${t.date}`],["LAST_YEAR",`${a} ${t.monthDay}, ${t.time}`]]).get(t.key);if(null==u)throw new Error("Not mapped");return u}_updateLatestValue(t){this.latestValue=t,this.changeDetectorRef.markForCheck()}toNicelyFormattedTime(t){t=this.verifyDateType(t);const o=(new Date).getTime()-t.getTime();return o<0?this.futureFormattedDate(-o,t):this.pastFormattedDate(o,t)}verifyDateType(t){return"string"==typeof t?this.parseDateStringToDate(t):t}parseDateStringToDate(t){return new Date(t)}pastFormattedDate(t,i){const a=new Date;a.setHours(0,0,0,0);const o=new Date;return o.setDate(o.getDate()-1),o.setHours(0,0,0,0),i>a?this.milisecondsToHoursAgo(t):i>o?this.dateToYesterday(i):t<365*this.ONE_DAY?this.dateToLocalizedDate(i):{key:null,date:this.toFormattedDate(i)}}futureFormattedDate(t,i){const a=new Date;a.setHours(24,0,0,0);const o=new Date;return o.setDate(o.getDate()+1),o.setHours(24,0,0,0),i<a?this.milisecondsToHoursTo(t):i<o?this.dateToTomorrow(i):t>365*this.ONE_DAY?this.dateToLocalizedDate(i):{key:null,date:this.toFormattedDate(i)}}milisecondsToHoursTo(t){const i=t/this.ONE_HOUR|0,a=t%this.ONE_HOUR/this.ONE_MINUTE|0;return 0===i?{key:"IN_MINUTES",minutes:a}:{key:"IN_HOURS_AND_MINUTES",hours:i,minutes:a}}milisecondsToHoursAgo(t){const i=t/this.ONE_HOUR|0,a=t%this.ONE_HOUR/this.ONE_MINUTE|0;return 0===i?{key:"MINUTES_ONLY_AGO",minutes:a}:{key:"HOURS_AND_MINUTES_AGO",hours:i,minutes:a}}dateToTomorrow(t){return{key:"TOMORROW_DATE",date:this.toFormattedTime(t)}}dateToLocalizedDate(t){return{key:"LAST_YEAR",month:this.mapMonthName(t.getMonth()+1),monthDay:t.getDate(),time:this.toFormattedTime(t)}}dateToYesterday(t){return{key:"YESTERDAY_DATE",date:this.toFormattedTime(t)}}toFormattedDate(t){return`${(t=this.verifyDateType(t)).getDate()}.${t.getMonth()+1}.${t.getFullYear()}`}toFormattedTime(t){return(t=this.verifyDateType(t)).toTimeString().split(" ")[0].split(":").slice(0,2).join(":")}mapMonthName(t){const a=new Map([[1,"JANUARY"],[2,"FEBRUARY"],[3,"MARCH"],[4,"APRIL"],[5,"MAY"],[6,"JUNI"],[7,"JULI"],[8,"AUGUST"],[9,"SEPTEMBER"],[10,"OKTOBER"],[11,"NOVEMBER"],[12,"DECEMBER"]]).get(t);if(null==a)throw new Error("Not mapped");return a}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO,16))},n.\u0275pipe=e.Yjl({name:"niceDateTime",type:n,pure:!1}),n})();const f=[{path:"**",pathMatch:"full",component:(()=>{class n{constructor(){this.currentDate=new Date,this.date3MinutesAgo=new Date((new Date).getTime()-18e4),this.date1Hour3MinutesAgo=new Date((new Date).getTime()-36e5-18e4),this.dateYesterday=new Date((new Date).getTime()-9e7),this.dateMonthAgo=new Date((new Date).getTime()-26784e5),this.dateYearAgo=new Date((new Date).getTime()-348192e5),this.date3MinutesLater=new Date((new Date).getTime()+18e4),this.date1Hour3MinutesLater=new Date((new Date).getTime()+36e5+18e4),this.dateTommorow=new Date((new Date).getTime()+9e7),this.dateYearLater=new Date((new Date).getTime()+348192e5),this.date1=new Date(2022,1,1),this.date3=new Date(2022,1,1)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["niceDateTime"]],decls:92,vars:33,consts:[[1,"container"],[1,"hint"],["href","https://github.com/Trolejbus/thursday-sharing/tree/main/thursday-sharing/src/app/examples/nice-date-pipe","target","_blank"],[1,"example-row","header"],[1,"label"],[1,"pipe-value"],[1,"example-row"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Allows to display dates in nicer way, than simple format. Dates will be automatically updates over time. Also pipe is working with ChangeDetection.OnPush strategy. Pipe result can be also easly translated to other language (see translate method in NiceDateTimePipe class). "),e._UZ(3,"br")(4,"br"),e._uU(5," This is only example code, and should be tested before production. "),e._UZ(6,"br")(7,"br"),e._uU(8," See code at: "),e.TgZ(9,"a",2),e._uU(10,"github"),e.qZA()(),e.TgZ(11,"code"),e.IAx(),e._uU(12," {{ currentDate | niceDateTime }} "),e.fQ9(),e.qZA(),e.TgZ(13,"div",3)(14,"div",4),e._uU(15,"Code"),e.qZA(),e.TgZ(16,"div",5),e._uU(17,"Pipe value"),e.qZA()(),e.TgZ(18,"div",6)(19,"div",4),e._uU(20,"Past dates"),e.qZA(),e._UZ(21,"div",5),e.qZA(),e.TgZ(22,"div",6)(23,"div",4),e._uU(24,"new Date()"),e.qZA(),e.TgZ(25,"div",5),e._uU(26),e.ALo(27,"niceDateTime"),e.qZA()(),e.TgZ(28,"div",6)(29,"div",4),e._uU(30,"new Date() - 3 minutes"),e.qZA(),e.TgZ(31,"div",5),e._uU(32),e.ALo(33,"niceDateTime"),e.qZA()(),e.TgZ(34,"div",6)(35,"div",4),e._uU(36,"new Date() - 1 hour 3 minutes"),e.qZA(),e.TgZ(37,"div",5),e._uU(38),e.ALo(39,"niceDateTime"),e.qZA()(),e.TgZ(40,"div",6)(41,"div",4),e._uU(42,"new Date() - 1 day 1 hour"),e.qZA(),e.TgZ(43,"div",5),e._uU(44),e.ALo(45,"niceDateTime"),e.qZA()(),e.TgZ(46,"div",6)(47,"div",4),e._uU(48,"new Date() - 1 month"),e.qZA(),e.TgZ(49,"div",5),e._uU(50),e.ALo(51,"niceDateTime"),e.qZA()(),e.TgZ(52,"div",6)(53,"div",4),e._uU(54,"new Date() - 1 year 1 month"),e.qZA(),e.TgZ(55,"div",5),e._uU(56),e.ALo(57,"niceDateTime"),e.qZA()(),e.TgZ(58,"div",6)(59,"div",4),e._uU(60,"Future dates"),e.qZA(),e._UZ(61,"div",5),e.qZA(),e.TgZ(62,"div",6)(63,"div",4),e._uU(64,"new Date() + 3 minutes"),e.qZA(),e.TgZ(65,"div",5),e._uU(66),e.ALo(67,"niceDateTime"),e.qZA()(),e.TgZ(68,"div",6)(69,"div",4),e._uU(70,"new Date() + 1 hour 3 minutes"),e.qZA(),e.TgZ(71,"div",5),e._uU(72),e.ALo(73,"niceDateTime"),e.qZA()(),e.TgZ(74,"div",6)(75,"div",4),e._uU(76,"new Date() + 1 day 1 hour"),e.qZA(),e.TgZ(77,"div",5),e._uU(78),e.ALo(79,"niceDateTime"),e.qZA()(),e.TgZ(80,"div",6)(81,"div",4),e._uU(82,"new Date() + 1 month"),e.qZA(),e.TgZ(83,"div",5),e._uU(84),e.ALo(85,"niceDateTime"),e.qZA()(),e.TgZ(86,"div",6)(87,"div",4),e._uU(88,"new Date() + 1 year 1 month"),e.qZA(),e.TgZ(89,"div",5),e._uU(90),e.ALo(91,"niceDateTime"),e.qZA()()()),2&t&&(e.xp6(26),e.Oqu(e.lcZ(27,11,i.currentDate)),e.xp6(6),e.Oqu(e.lcZ(33,13,i.date3MinutesAgo)),e.xp6(6),e.Oqu(e.lcZ(39,15,i.date1Hour3MinutesAgo)),e.xp6(6),e.Oqu(e.lcZ(45,17,i.dateYesterday)),e.xp6(6),e.Oqu(e.lcZ(51,19,i.dateMonthAgo)),e.xp6(6),e.Oqu(e.lcZ(57,21,i.dateYearAgo)),e.xp6(10),e.Oqu(e.lcZ(67,23,i.date3MinutesLater)),e.xp6(6),e.Oqu(e.lcZ(73,25,i.date1Hour3MinutesLater)),e.xp6(6),e.Oqu(e.lcZ(79,27,i.dateTommorow)),e.xp6(6),e.Oqu(e.lcZ(85,29,i.dateMonthAgo)),e.xp6(6),e.Oqu(e.lcZ(91,31,i.dateYearLater)))},dependencies:[M],styles:[".container[_ngcontent-%COMP%]{width:500px}.example-row[_ngcontent-%COMP%]{display:flex;padding:4px}.example-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:300px;font-weight:700}.example-row.header[_ngcontent-%COMP%]{border-bottom:1px solid black;font-weight:700}.example-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.example-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}"],changeDetection:0}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,c.Bz.forChild(f)]}),n})()}}]);