"use strict";(self.webpackChunkthursday_sharing=self.webpackChunkthursday_sharing||[]).push([[449],{449:(H,d,a)=>{a.r(d),a.d(d,{NiceDatePipeModule:()=>F});var p=a(895),g=a(398),e=a(256),A=a(135),v=a(121),f=a(727);class y extends f.w0{constructor(n,t){super()}schedule(n,t=0){return this}}const h={setInterval(s,n,...t){const{delegate:i}=h;return i?.setInterval?i.setInterval(s,n,...t):setInterval(s,n,...t)},clearInterval(s){const{delegate:n}=h;return(n?.clearInterval||clearInterval)(s)},delegate:void 0};var w=a(737);const m={now:()=>(m.delegate||Date).now(),delegate:void 0};class l{constructor(n,t=l.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}}l.now=m.now;const T=new class U extends l{constructor(n,t=l.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}}(class Z extends y{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,i=0){return h.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&h.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,w.P)(i,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}),N=T;var O=a(751),E=a(532);function R(s=0,n=T){return s<0&&(s=0),function b(s=0,n,t=N){let i=-1;return null!=n&&((0,E.K)(n)?t=n:i=n),new O.y(r=>{let o=function M(s){return s instanceof Date&&!isNaN(s)}(s)?+s-t.now():s;o<0&&(o=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(s,s,n)}var I=a(675),c=a(4),S=a(300),P=a(671),Y=a(482),L=a(403);function C(s,n){return s===n}let q=(()=>{class s{constructor(t){this.changeDetectorRef=t,this.subscription=null,this.latestValue=null,this.dateSubject$=new A.X(null),this.ONE_DAY=864e5,this.ONE_HOUR=36e5,this.ONE_MINUTE=6e4,this.date$=(0,v.a)([this.dateSubject$,R(1e4).pipe((0,I.O)(0))]).pipe((0,c.U)(([i,r])=>i),(0,S.h)(i=>null!=i),(0,c.U)(i=>this.toNicelyFormattedTime(i)),(0,c.U)(i=>this.translate(i)),function x(s,n=P.y){return s=s??C,(0,Y.e)((t,i)=>{let r,o=!0;t.subscribe((0,L.x)(i,u=>{const D=n(u);(o||!s(r,D))&&(o=!1,r=D,i.next(u))}))})}()),this.subscription=this.date$.subscribe(i=>{this._updateLatestValue(i)})}ngOnDestroy(){null!=this.subscription&&this._dispose()}transform(t){return this.dateSubject$.next(t),this.latestValue}_dispose(){this.subscription?.unsubscribe(),this.latestValue=null}translate(t){if(null==t.key)return t.date??"";const r=null!=t.month?new Map([["JANUARY","january"],["FEBRUARY","february"],["MARCH","march"],["APRIL","april"],["MAY","may"],["JUNI","juni"],["JULI","juli"],["AUGUST","august"],["SEPTEMBER","september"],["OKTOBER","oktober"],["NOVEMBER","november"],["DECEMBER","december"]]).get(t.month):null,u=new Map([["MINUTES_ONLY_AGO",`${t.minutes} minutes ago`],["HOURS_AND_MINUTES_AGO",`${t.hours} hours ${t.minutes} minutes ago`],["IN_MINUTES",`in ${t.minutes} minutes`],["IN_HOURS_AND_MINUTES",`in ${t.hours} hours ${t.minutes} minutes`],["YESTERDAY_DATE",`yesterday ${t.date}`],["TOMORROW_DATE",`tomorrow ${t.date}`],["LAST_YEAR",`${r} ${t.monthDay}, ${t.time}`]]).get(t.key);if(null==u)throw new Error("Not mapped");return u}_updateLatestValue(t){this.latestValue=t,this.changeDetectorRef.markForCheck()}toNicelyFormattedTime(t){t=this.verifyDateType(t);const o=(new Date).getTime()-t.getTime();return o<0?this.futureFormattedDate(-o,t):this.pastFormattedDate(o,t)}verifyDateType(t){return"string"==typeof t?this.parseDateStringToDate(t):t}parseDateStringToDate(t){return new Date(t)}pastFormattedDate(t,i){return t<this.ONE_DAY?this.milisecondsToHoursAgo(t):t<2*this.ONE_DAY?this.dateToYesterday(i):t<365*this.ONE_DAY?this.dateToLocalizedDate(i):{key:null,date:this.toFormattedDate(i)}}futureFormattedDate(t,i){return t<this.ONE_DAY?this.milisecondsToHoursTo(t):t<2*this.ONE_DAY?this.dateToTomorrow(i):t<365*this.ONE_DAY?this.dateToLocalizedDate(i):{key:null,date:this.toFormattedDate(i)}}milisecondsToHoursTo(t){const i=t/this.ONE_HOUR|0,r=t%this.ONE_HOUR/this.ONE_MINUTE|0;return 0===i?{key:"IN_MINUTES",minutes:r}:{key:"IN_HOURS_AND_MINUTES",hours:i,minutes:r}}milisecondsToHoursAgo(t){const i=t/this.ONE_HOUR|0,r=t%this.ONE_HOUR/this.ONE_MINUTE|0;return 0===i?{key:"MINUTES_ONLY_AGO",minutes:r}:{key:"HOURS_AND_MINUTES_AGO",hours:i,minutes:r}}dateToTomorrow(t){return{key:"TOMORROW_DATE",date:this.toFormattedTime(t)}}dateToLocalizedDate(t){return{key:"LAST_YEAR",month:this.mapMonthName(t.getMonth()+1),monthDay:t.getDate(),time:this.toFormattedTime(t)}}dateToYesterday(t){return{key:"YESTERDAY_DATE",date:this.toFormattedTime(t)}}toFormattedDate(t){return`${(t=this.verifyDateType(t)).getDate()}.${t.getMonth()+1}.${t.getFullYear()}`}toFormattedTime(t){return(t=this.verifyDateType(t)).toTimeString().split(" ")[0].split(":").slice(0,2).join(":")}mapMonthName(t){const r=new Map([[1,"JANUARY"],[2,"FEBRUARY"],[3,"MARCH"],[4,"APRIL"],[5,"MAY"],[6,"JUNI"],[7,"JULI"],[8,"AUGUST"],[9,"SEPTEMBER"],[10,"OKTOBER"],[11,"NOVEMBER"],[12,"DECEMBER"]]).get(t);if(null==r)throw new Error("Not mapped");return r}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(e.sBO,16))},s.\u0275pipe=e.Yjl({name:"niceDateTime",type:s,pure:!1}),s})();const _=[{path:"**",pathMatch:"full",component:(()=>{class s{constructor(){this.currentDate=new Date,this.date3MinutesAgo=new Date((new Date).getTime()-18e4),this.date1Hour3MinutesAgo=new Date((new Date).getTime()-36e5-18e4),this.dateYesterday=new Date((new Date).getTime()-9e7),this.dateMonthAgo=new Date((new Date).getTime()-26784e5),this.dateYearAgo=new Date((new Date).getTime()-348192e5),this.date3MinutesLater=new Date((new Date).getTime()+18e4),this.date1Hour3MinutesLater=new Date((new Date).getTime()+36e5+18e4),this.dateTommorow=new Date((new Date).getTime()+9e7),this.dateYearLater=new Date((new Date).getTime()+348192e5),this.date1=new Date(2022,1,1),this.date3=new Date(2022,1,1)}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["niceDateTime"]],decls:90,vars:33,consts:[[1,"container"],[1,"hint"],["href","https://github.com/Trolejbus/thursday-sharing","target","_blank"],[1,"example-row","header"],[1,"label"],[1,"pipe-value"],[1,"example-row"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Allows to display dates in nicer way, than simple format. Dates will be automatically updates over time. Also pipe is working with ChangeDetection.OnPush strategy. Pipe result can be also easly translated to other language (see translate method in NiceDateTimePipe class). "),e._UZ(3,"br")(4,"br"),e._uU(5," This is only example code, and should be tested before production. "),e._UZ(6,"br")(7,"br"),e._uU(8," See code at: "),e.TgZ(9,"a",2),e._uU(10,"https://github.com/Trolejbus/thursday-sharing"),e.qZA()(),e.TgZ(11,"div",3)(12,"div",4),e._uU(13,"Code"),e.qZA(),e.TgZ(14,"div",5),e._uU(15,"Pipe value"),e.qZA()(),e.TgZ(16,"div",6)(17,"div",4),e._uU(18,"Past dates"),e.qZA(),e._UZ(19,"div",5),e.qZA(),e.TgZ(20,"div",6)(21,"div",4),e._uU(22,"new Date()"),e.qZA(),e.TgZ(23,"div",5),e._uU(24),e.ALo(25,"niceDateTime"),e.qZA()(),e.TgZ(26,"div",6)(27,"div",4),e._uU(28,"new Date() - 3 minutes"),e.qZA(),e.TgZ(29,"div",5),e._uU(30),e.ALo(31,"niceDateTime"),e.qZA()(),e.TgZ(32,"div",6)(33,"div",4),e._uU(34,"new Date() - 1 hour 3 minutes"),e.qZA(),e.TgZ(35,"div",5),e._uU(36),e.ALo(37,"niceDateTime"),e.qZA()(),e.TgZ(38,"div",6)(39,"div",4),e._uU(40,"new Date() - 1 day 1 hour"),e.qZA(),e.TgZ(41,"div",5),e._uU(42),e.ALo(43,"niceDateTime"),e.qZA()(),e.TgZ(44,"div",6)(45,"div",4),e._uU(46,"new Date() - 1 month"),e.qZA(),e.TgZ(47,"div",5),e._uU(48),e.ALo(49,"niceDateTime"),e.qZA()(),e.TgZ(50,"div",6)(51,"div",4),e._uU(52,"new Date() - 1 year 1 month"),e.qZA(),e.TgZ(53,"div",5),e._uU(54),e.ALo(55,"niceDateTime"),e.qZA()(),e.TgZ(56,"div",6)(57,"div",4),e._uU(58,"Future dates"),e.qZA(),e._UZ(59,"div",5),e.qZA(),e.TgZ(60,"div",6)(61,"div",4),e._uU(62,"new Date() + 3 minutes"),e.qZA(),e.TgZ(63,"div",5),e._uU(64),e.ALo(65,"niceDateTime"),e.qZA()(),e.TgZ(66,"div",6)(67,"div",4),e._uU(68,"new Date() + 1 hour 3 minutes"),e.qZA(),e.TgZ(69,"div",5),e._uU(70),e.ALo(71,"niceDateTime"),e.qZA()(),e.TgZ(72,"div",6)(73,"div",4),e._uU(74,"new Date() + 1 day 1 hour"),e.qZA(),e.TgZ(75,"div",5),e._uU(76),e.ALo(77,"niceDateTime"),e.qZA()(),e.TgZ(78,"div",6)(79,"div",4),e._uU(80,"new Date() + 1 month"),e.qZA(),e.TgZ(81,"div",5),e._uU(82),e.ALo(83,"niceDateTime"),e.qZA()(),e.TgZ(84,"div",6)(85,"div",4),e._uU(86,"new Date() + 1 year 1 month"),e.qZA(),e.TgZ(87,"div",5),e._uU(88),e.ALo(89,"niceDateTime"),e.qZA()()()),2&t&&(e.xp6(24),e.Oqu(e.lcZ(25,11,i.currentDate)),e.xp6(6),e.Oqu(e.lcZ(31,13,i.date3MinutesAgo)),e.xp6(6),e.Oqu(e.lcZ(37,15,i.date1Hour3MinutesAgo)),e.xp6(6),e.Oqu(e.lcZ(43,17,i.dateYesterday)),e.xp6(6),e.Oqu(e.lcZ(49,19,i.dateMonthAgo)),e.xp6(6),e.Oqu(e.lcZ(55,21,i.dateYearAgo)),e.xp6(10),e.Oqu(e.lcZ(65,23,i.date3MinutesLater)),e.xp6(6),e.Oqu(e.lcZ(71,25,i.date1Hour3MinutesLater)),e.xp6(6),e.Oqu(e.lcZ(77,27,i.dateTommorow)),e.xp6(6),e.Oqu(e.lcZ(83,29,i.dateMonthAgo)),e.xp6(6),e.Oqu(e.lcZ(89,31,i.dateYearLater)))},dependencies:[q],styles:[".container[_ngcontent-%COMP%]{width:500px}.example-row[_ngcontent-%COMP%]{display:flex;padding:4px}.example-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:300px;font-weight:700}.example-row.header[_ngcontent-%COMP%]{border-bottom:1px solid black;font-weight:700}.example-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0}.example-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}.hint[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:10px;margin:10px 0}"],changeDetection:0}),s})()}];let F=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,g.Bz.forChild(_)]}),s})()}}]);